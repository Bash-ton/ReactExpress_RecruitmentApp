(this.webpackJsonpid1201arkitektur=this.webpackJsonpid1201arkitektur||[]).push([[0],{153:function(e,t,n){},154:function(e,t,n){},276:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},299:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(11),i=n.n(r),a=(n(153),n(9)),s=n(10),o=n(22),l=n(23),d=(n(154),n(16)),u=n(127),j=n.n(u),b=function(){function e(){Object(a.a)(this,e)}return Object(s.a)(e,[{key:"apiAxios",value:function(){return j.a.create({baseURL:"/",withCredentials:!0,credentials:"include",headers:{"Content-Type":"application/json"}})}}]),e}(),p=n(24),h=function(){function e(){Object(a.a)(this,e),this.myExpertise=[],this.observers=[]}return Object(s.a)(e,[{key:"getExpertise",value:function(){return this.myExpertise}},{key:"removeExpertise",value:function(e){this.myExpertise=Object(p.a)(this.myExpertise.filter((function(t){return t.name!==e}))),this.notifyObserver()}},{key:"addExpertise",value:function(e,t){var n={name:e,year:t};this.myExpertise=[].concat(Object(p.a)(this.myExpertise),[n]),this.notifyObserver()}},{key:"getAllExpertise",value:function(){return["A-skills","B-skills","C-skills","D-skills","E-skills"]}},{key:"addObserver",value:function(e){var t=this;return this.observers=this.observers.concat(e),function(){return t.removeObserver(e)}}},{key:"notifyObserver",value:function(){this.observers.forEach((function(e){e()}))}},{key:"removeObserver",value:function(e){this.observers=this.observers.filter((function(t){return t!==e}))}}]),e}(),O=n(15),m=n(21),x=n(2);function f(e){var t=e.model,n=e.apiCall,r=Object(m.c)((function(e){return e.UserReducer.userInfo[0].isLoggedIn})),i=Object(m.c)((function(e){return e.UserReducer.userInfo[0].role})),a=Object(m.c)((function(e){return e.UserReducer.userInfo[0].email})),s=Object(c.useState)(!1),o=Object(O.a)(s,2),l=o[0],u=o[1],j=Object(d.e)();n.apiAxios().get("posts/postEmail="+a).then((function(e){return console.log(e.status),console.log(e),u(!0)})).catch((function(e){u(!1),400==e.response.status?console.log(e):j.replace(j.location.pathname,{errorStatusCode:e.response.status})})),Object(c.useEffect)((function(){"client"===i&&!1!==r||(window.location="/")}),[r,i]),Object(c.useEffect)((function(){"client"===i&&!1!==r||(window.location="/")}),[]);var b=Object(c.useState)(t.getAllExpertise()),h=Object(O.a)(b,2),f=h[0],y=h[1];Object(c.useEffect)((function(){return y(t.getAllExpertise())}),[]);var S=Object(c.useState)(t.getExpertise()),w=Object(O.a)(S,2),k=w[0],E=w[1];Object(c.useEffect)((function(){return t.addObserver((function(){E(t.getExpertise())}))}),[t]),Object(c.useEffect)((function(){return localStorage.setItem("formData",k)}));var C=n.apiAxios();return Object(x.jsx)("div",{children:"client"===i&&!0===r?Object(x.jsx)("div",{children:l?Object(x.jsx)("div",{children:"You have already made an application. Please wait for us to give you a response"}):Object(x.jsxs)("div",{children:[Object(x.jsx)(v,{myExpertise:k,removeExpertise:function(e){t.removeExpertise(e),y([].concat(Object(p.a)(f),[e]))}}),Object(x.jsx)(g,{expertise:f,addExpertise:function(e,n){return t.addExpertise(e,n)},done:function(e){return C.post("posts",{startPeriod:e.start,endPeriod:e.end,dateOfBirth:{year:e.dateOfBirth.year,month:e.dateOfBirth.month,day:e.dateOfBirth.day},status:"unhandled",firstName:e.fname,lastName:e.lname,competence:k,email:e.email}).catch((function(e){400==e.response.status?console.log(e):j.replace(j.location.pathname,{errorStatusCode:e.response.status})}))},removeOption:function(e){return function(e){var t=f.filter((function(t){return t!==e}));y(t)}(e)}})]})}):""})}var v=function(e){var t=e.myExpertise,n=e.removeExpertise;return Object(x.jsx)("div",{children:t.map((function(e){return Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.name}),Object(x.jsx)("td",{children:e.year})]},e.name+e.year),Object(x.jsx)("button",{onClick:function(){return n(e.name)},children:"remove"})]})}))})},g=function(e){var t=e.expertise,n=e.addExpertise,r=e.done,i=e.removeOption,a=Object(m.c)((function(e){return e.UserReducer.userInfo}));console.log(a);var s=Object(c.useState)(0),o=Object(O.a)(s,2),l=o[0],d=o[1],u=Object(c.useState)(""),j=Object(O.a)(u,2),b=j[0],p=j[1],h=Object(c.useState)(""),f=Object(O.a)(h,2),v=f[0],g=f[1],y=Object(c.useState)(""),S=Object(O.a)(y,2),w=S[0],k=S[1];return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"number",min:"0",placeholder:"years of experience",onChange:function(e){return d(e.target.value)}}),Object(x.jsxs)("select",{onChange:function(e){return p(e.target.value)},children:[Object(x.jsx)("option",{children:"choose your expertise"}),t.map((function(e){return Object(x.jsx)("option",{children:e},e)}))]}),Object(x.jsx)("button",{onClick:function(){n(b,l),i(b)},children:"add skill to application"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"text",min:"0",placeholder:"available start period",onChange:function(e){g(e.target.value)}}),Object(x.jsx)("input",{type:"text",min:"0",placeholder:"available end period",onChange:function(e){k(e.target.value)}}),Object(x.jsx)("button",{onClick:function(){!0===window.confirm("Are you sure you want to submit your application?")&&r({start:v,end:w,fname:a[0].fname,lname:a[0].lname,status:"unhandled",dateOfBirth:a[0].dateOfBirth,email:a[0].email})},children:"confirm and send application"})]})]})},y=n(54),S=n(79),w=n(27),k=n(331),E=n(330),C=n(25),N=function(e){return function(t,n){t({type:"LOG_IN_USER",role:e.data.role,fname:e.data.firstName,lname:e.data.lastName,dateOfBirth:e.data.dateOfBirth,email:e.data.email})}},L=(n(276),n(74)),B=n.n(L),I=function(e){var t=e.apiCall,n=Object(c.useState)("Sign up"),r=Object(O.a)(n,2),i=r[0],a=r[1],s=Object(c.useState)("Login"),o=Object(O.a)(s,2),l=o[0],u=o[1],j=Object(m.c)((function(e){return e.UserReducer.userInfo[0].isLoggedIn})),b=Object(m.c)((function(e){return e.UserReducer.userInfo[0].role})),p=Object(m.b)(),h=Object(c.useState)(!1),f=Object(O.a)(h,2),v=f[0],g=f[1],L=Object(d.e)();Object(c.useEffect)((function(){"client"===b?window.location="/user/application":"admin"===b&&(window.location="/admin/applications")}),[j]);var I=function(e){var t=e.placeholder,n=Object(S.a)(e,["placeholder"]),c=Object(w.d)(n),r=Object(O.a)(c,2),i=r[0],a=r[1],s=a.error&&a.touched?a.error:"";return Object(x.jsx)(k.a,Object(y.a)(Object(y.a)({placeholder:t},i),{},{helperText:s,error:!!s,type:n.type}))},R=C.c().shape({email:C.d().min(4,"Too Short!").required("Required").email("Invalid email"),password:C.d().min(4,"Too Short!").required("Required"),firstName:"Login"===i?C.d():C.d().required("Required"),lastName:"Login"===i?C.d():C.d().required("Required"),dateOfBirth:C.a().of(C.c().shape({year:"Login"===i?C.b():C.b().required("Required"),month:"Login"===i?C.b():C.b().min(1,"must be between 1 and 12").max(12,"must be between 1 and 31").required("Required"),day:"Login"===i?C.b():C.b().min(1,"must be between 1 and 31").max(31,"must be between 1 and 31").required("Required")}))});return Object(x.jsx)("div",{className:"outer-wrapper",children:v?Object(x.jsx)(B.a,{visible:v,type:"TailSpin",color:"#00BFFF",height:80,width:80}):Object(x.jsx)("div",{children:j?"":Object(x.jsx)("div",{className:"inner-wrapper",children:Object(x.jsx)(w.c,{initialValues:{username:"",email:"",password:"",firstName:"",lastName:"",dateOfBirth:[{year:"",month:"",day:""}]},onSubmit:function(e,n){var c=n.setSubmitting,r=n.resetForm;(c(!0),r(),g((function(e){return!e})),"Sign up"===i)?t.apiAxios().post("auth/register",{data:e}).then((function(n){t.apiAxios().post("auth/login",{email:e.email,password:e.password}).then((function(e){p(N(e))}),(function(e){g((function(e){return!e})),400==e.response.status?alert("Wrong email and/or password"):L.replace(L.location.pathname,{errorStatusCode:e.response.status})}))}),(function(e){g((function(e){return!e})),400==e.response.status?alert("email already in use"):L.replace(L.location.pathname,{errorStatusCode:e.response.status})})):t.apiAxios().post("auth/login",{email:e.email,password:e.password}).then((function(e){g((function(e){return!e})),p(N(e))}),(function(e){g((function(e){return!e})),400==e.response.status?alert("Wrong email and/or password"):L.replace(L.location.pathname,{errorStatusCode:e.response.status})}));c(!1)},validationSchema:R,children:function(e){var t=e.values,n=e.isSubmitting,c=e.resetForm,r=e.errors;return Object(x.jsxs)(w.b,{children:["Sign up"===i?Object(x.jsx)("div",{children:Object(x.jsx)("p",{children:"Create an account"})}):Object(x.jsx)("div",{children:"Log in"}),Object(x.jsx)("div",{children:Object(x.jsx)(I,{placeholder:"Email",name:"email",type:"input"})}),Object(x.jsx)("div",{children:Object(x.jsx)(I,{placeholder:"Password",name:"password",type:"password"})}),"Sign up"===i?Object(x.jsx)("div",{children:Object(x.jsx)(I,{placeholder:"Username",name:"username",type:"input"})}):"","Sign up"===i?Object(x.jsx)("div",{children:Object(x.jsx)(I,{placeholder:"First Name",name:"firstName",type:"input"})}):"","Sign up"===i?Object(x.jsx)("div",{children:Object(x.jsx)(I,{placeholder:"Last Name",name:"lastName",type:"input"})}):"",Object(x.jsx)("br",{}),"Sign up"===i?Object(x.jsxs)("div",{children:[Object(x.jsx)(I,{placeholder:"Year",name:"dateOfBirth[0].year",type:"number"}),Object(x.jsx)("br",{}),Object(x.jsx)(I,{placeholder:"Month",name:"dateOfBirth[0].month",type:"number"}),Object(x.jsx)("br",{}),Object(x.jsx)(I,{placeholder:"Day",name:"dateOfBirth[0].day",type:"number"})]}):"",Object(x.jsx)("div",{children:Object(x.jsx)(E.a,{disabled:n,type:"submit",children:i})}),Object(x.jsx)("pre",{children:JSON.stringify(t,null,2)}),Object(x.jsx)("pre",{children:JSON.stringify(r,null,2)}),Object(x.jsx)("div",{onClick:function(){"Login"===i?(a("Sign up"),u("Login")):(a("Login"),u("Sign up")),c()},children:l})]})}})})})})},R=function(){return Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)(w.c,{initialValues:{email:"",password:"",adminKey:""},onSubmit:function(e,t){var n=t.setSubmitting,c=t.resetForm;n(!0),c(),console.log("submit:",e),n(!1)},children:function(e){var t=e.values,n=e.isSubmitting;return Object(x.jsx)("div",{children:Object(x.jsxs)(w.b,{children:[Object(x.jsx)("div",{children:Object(x.jsx)(w.a,{placeholder:"Email",name:"email",type:"input",as:k.a})}),Object(x.jsx)("div",{children:Object(x.jsx)(w.a,{placeholder:"Password",name:"password",type:"password",as:k.a})}),Object(x.jsx)("div",{children:Object(x.jsx)(w.a,{placeholder:"Key",name:"adminKey",type:"password",as:k.a})}),Object(x.jsx)("div",{children:Object(x.jsx)(E.a,{disabled:n,type:"submit",children:"Sign up"})}),Object(x.jsx)("pre",{children:JSON.stringify(t,null,2)})]})})}}),Object(x.jsx)("div",{onClick:function(){var e;e="/",window.location=e},children:"log in"})]})},U=n(333),q=n(332),A=function(e){var t,n,c=e.apiCall,r=e.item,i=Object(d.e)();return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:r.firstName}),Object(x.jsx)("td",{children:r.lastName}),Object(x.jsx)("td",{children:null===(t=r.competence)||void 0===t?void 0:t.map((function(e){return Object(x.jsxs)("div",{children:[e.name," ",e.year," year(s)"]})}))}),Object(x.jsx)("td",{children:r.startPeriod}),Object(x.jsx)("td",{children:r.endPeriod}),Object(x.jsx)("td",{children:null===(n=r.dateOfBirth)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("div",{children:[e.year,"-",e.month,"-",e.day," "]})}))}),Object(x.jsx)("td",{children:r.date}),Object(x.jsx)("td",{children:Object(x.jsxs)("select",{name:"status",onChange:function(e){!function(e){c.apiAxios().post("posts/application",{status:e.target.value,email:r.email}).then((function(e){console.log(e)}),(function(e){400==e.response.status?console.log("Email is incorrect"):i.replace(i.location.pathname,{errorStatusCode:e.response.status})}))}(e)},children:["unhandled"===r.status?Object(x.jsx)("option",{selected:"selected",value:"unhandled",children:"unhandled"}):Object(x.jsx)("option",{value:"unhandled",children:"unhandled"}),"rejected"===r.status?Object(x.jsx)("option",{selected:"selected",value:"rejected",children:"rejected"}):Object(x.jsx)("option",{value:"rejected",children:"rejected"}),"accepted"===r.status?Object(x.jsx)("option",{selected:"selected",value:"accepted",children:"accepted"}):Object(x.jsx)("option",{value:"accepted",children:"accepted"})]})})]},r.id)},F=(n(295),function(e){var t=e.apiCall,n=e.applications;return Object(x.jsxs)("table",{className:"content-table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"fname"}),Object(x.jsx)("th",{children:"lname"}),Object(x.jsx)("th",{children:"skills"}),Object(x.jsx)("th",{children:"startP"}),Object(x.jsx)("th",{children:"endP"}),Object(x.jsx)("th",{children:"date of birth"}),Object(x.jsx)("th",{children:"application made at"}),Object(x.jsx)("th",{children:"application status"})]})}),Object(x.jsx)("tbody",{children:null===n||void 0===n?void 0:n.map((function(e){return Object(x.jsx)(A,{apiCall:t,item:e})}))})]})}),P=function(e){var t=e.apiCall,n=Object(c.useState)([]),r=Object(O.a)(n,2),i=r[0],a=r[1],s=Object(m.c)((function(e){return e.UserReducer.userInfo[0].isLoggedIn})),o=Object(m.c)((function(e){return e.UserReducer.userInfo[0].role})),l=Object(d.e)(),u=Object(c.useState)(!1),j=Object(O.a)(u,2),b=j[0],p=j[1];Object(c.useEffect)((function(){"admin"===o&&!1!==s||(window.location="/")}),[s,o]);var h=function(e){var t=e.label,n=Object(S.a)(e,["label"]),c=Object(w.d)(n),r=Object(O.a)(c,1)[0];return Object(x.jsx)(U.a,Object(y.a)(Object(y.a)({},r),{},{control:Object(x.jsx)(q.a,{}),label:t}))};return Object(x.jsx)("div",{children:b?Object(x.jsx)(B.a,{visible:b,type:"TailSpin",color:"#00BFFF",height:80,width:80}):Object(x.jsx)("div",{children:"admin"===o&&!0===s?Object(x.jsxs)("div",{children:[Object(x.jsx)(w.c,{initialValues:{competences:[]},onSubmit:function(e,n){var c=n.setSubmitting;c(!0);var r="posts";1===e.competences.length?r="posts/competence="+e.competences[0]:2===e.competences.length?r="posts/competence="+e.competences[0]+"&="+e.competences[1]:3===e.competences.length?r="posts/competence="+e.competences[0]+"&="+e.competences[1]+"&="+e.competences[2]:4===e.competences.length?r="posts/competence="+e.competences[0]+"&="+e.competences[1]+"&="+e.competences[2]+"&="+e.competences[3]:5===e.competences.length&&(r="posts/competence="+e.competences[0]+"&="+e.competences[1]+"&="+e.competences[2]+"&="+e.competences[3]+"&="+e.competences[4]),console.log(r),t.apiAxios().get(r).then((function(e){return c(!1),a(e.data),a(e.data)})).catch((function(e){p((function(e){return!e})),400==e.response.status?console.log(e):l.replace(l.location.pathname,{errorStatusCode:e.response.status})}))},children:function(e){var t=e.values,n=e.isSubmitting,c=e.errors;return Object(x.jsxs)(w.b,{children:[Object(x.jsx)(h,{name:"competences",value:"A-skills",type:"checkbox",label:"A-skills"}),Object(x.jsx)(h,{name:"competences",value:"B-skills",type:"checkbox",label:"B-skills"}),Object(x.jsx)(h,{name:"competences",value:"C-skills",type:"checkbox",label:"C-skills"}),Object(x.jsx)(h,{name:"competences",value:"D-skills",type:"checkbox",label:"D-skills"}),Object(x.jsx)(h,{name:"competences",value:"E-skills",type:"checkbox",label:"E-skills"}),Object(x.jsx)(E.a,{disabled:n,type:"submit",children:"Get Applications"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("pre",{children:JSON.stringify(t,null,2)}),Object(x.jsx)("pre",{children:JSON.stringify(c,null,2)})]})]})}}),i.length>0?Object(x.jsx)(F,{apiCall:t,applications:i}):""]}):""})})},T=(n(296),function(){var e=Object(m.c)((function(e){return e.UserReducer.userInfo[0].isLoggedIn})),t=Object(m.b)();return Object(x.jsxs)("div",{className:"Header-wrapper",children:[Object(x.jsx)("div",{className:"logo",children:"Recruitment Logo Here"}),e?Object(x.jsx)("button",{className:"authButton",onClick:function(){return t((function(e,t){e({type:"LOG_OUT_USER"})}))},children:"Log out"}):""]})}),_=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).state={apiCall:new b,model:new h},c}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"applicationApp",children:[Object(x.jsx)("header",{className:"recruitmentApp",children:Object(x.jsx)(T,{})}),Object(x.jsx)(d.a,{exact:!0,path:"/",render:function(){return Object(x.jsx)(I,{apiCall:e.state.apiCall})}}),Object(x.jsx)(d.a,{exact:!0,path:"/admin/signup",render:function(){return Object(x.jsx)(R,{})}}),Object(x.jsx)(d.a,{exact:!0,path:"/user/application",render:function(){return Object(x.jsx)(f,{model:e.state.model,apiCall:e.state.apiCall})}}),Object(x.jsx)(d.a,{exact:!0,path:"/admin/applications",render:function(){return Object(x.jsx)(P,{apiCall:e.state.apiCall})}})]})}}]),n}(c.Component),J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,335)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},D=n(32),G=n(138),K=n(94),V=n(139),H=n.n(V),W={userInfo:[{isLoggedIn:!1,role:null,fname:"",lname:"",dateOfBirth:"",email:""}]},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN_USER":return{userInfo:[{isLoggedIn:!0,role:t.role,fname:t.fname,lname:t.lname,dateOfBirth:t.dateOfBirth,email:t.email}]};case"LOG_OUT_USER":return{userInfo:[{isLoggedIn:!1,role:null,fname:"",lname:"",dateOfBirth:"",email:""}]};default:return e}},z=Object(D.c)({UserReducer:Y}),M={key:"root",storage:H.a},Q=Object(K.a)(M,z),X=Object(D.d)(Q,Object(D.a)(G.a)),Z=Object(K.b)(X),$=n(26),ee=n(140),te=n(141),ne=function(e){var t=e.children,n=Object(d.f)();switch(Object(te.get)(n.state,"errorStatusCode")){case 404:return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"404 Error"}),Object(x.jsx)("p",{children:"The requested URL was not found on this server."}),Object(x.jsx)($.b,{to:"/",children:Object(x.jsx)("button",{type:"button",children:"back to main app"})})]});case 401:return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"401 Error"}),Object(x.jsx)("p",{children:"Unauthorized access."}),Object(x.jsx)($.b,{to:"/",children:Object(x.jsx)("button",{type:"button",children:"back to main app"})})]});case 500:return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"500 Error"}),Object(x.jsx)("p",{children:"Server encountered a internal error and cannot handle the request."}),Object(x.jsx)($.b,{to:"/",children:Object(x.jsx)("button",{type:"button",children:"back to main app"})})]});case 501:return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"501 Error"}),Object(x.jsx)("p",{children:"Server encountered a error and currently cannot handle the request."}),Object(x.jsx)($.b,{to:"/",children:Object(x.jsx)("button",{type:"button",children:"back to main app"})})]});case 503:return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"503 Error"}),Object(x.jsx)("p",{children:"Server encountered a error and currently cannot handle the request."}),Object(x.jsx)($.b,{to:"/",children:Object(x.jsx)("button",{type:"button",children:"back to main app"})})]});default:return t}};i.a.render(Object(x.jsx)(m.a,{store:X,children:Object(x.jsx)(ee.a,{loading:null,persistor:Z,children:Object(x.jsx)($.a,{children:Object(x.jsx)(ne,{children:Object(x.jsx)(_,{})})})})}),document.getElementById("root")),J()}},[[299,1,2]]]);
//# sourceMappingURL=main.7697665a.chunk.js.map