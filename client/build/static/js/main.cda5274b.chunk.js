(this.webpackJsonpid1201arkitektur=this.webpackJsonpid1201arkitektur||[]).push([[0],{151:function(e,t,n){},152:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n(11),r=n.n(i),s=(n(151),n(9)),a=n(10),o=n(21),l=n(22),d=(n(152),n(15)),u=n(68),j=n.n(u),b=function(){function e(){Object(s.a)(this,e)}return Object(a.a)(e,[{key:"apiAxios",value:function(){return j.a.create({baseURL:"/",headers:{"Content-Type":"application/json"}})}}]),e}(),O=n(23),p=function(){function e(){Object(s.a)(this,e),this.myExpertise=[],this.observers=[]}return Object(a.a)(e,[{key:"getExpertise",value:function(){return this.myExpertise}},{key:"removeExpertise",value:function(e){this.myExpertise=Object(O.a)(this.myExpertise.filter((function(t){return t.name!==e}))),this.notifyObserver()}},{key:"addExpertise",value:function(e,t){var n={name:e,year:t};this.myExpertise=[].concat(Object(O.a)(this.myExpertise),[n]),this.notifyObserver()}},{key:"getAllExpertise",value:function(){return["A-skills","B-skills","C-skills","D-skills","E-skills"]}},{key:"addObserver",value:function(e){var t=this;return this.observers=this.observers.concat(e),function(){return t.removeObserver(e)}}},{key:"notifyObserver",value:function(){this.observers.forEach((function(e){e()}))}},{key:"removeObserver",value:function(e){this.observers=this.observers.filter((function(t){return t!==e}))}}]),e}(),h=n(18),m=n(24),f=n(2);function x(e){var t=e.model,n=e.apiCall,i=Object(m.c)((function(e){return e.UserReducer.userInfo[0].isLoggedIn})),r=Object(m.c)((function(e){return e.UserReducer.userInfo[0].role}));Object(c.useEffect)((function(){"client"===r&&!1!==i||(window.location="/")}),[i,r]),Object(c.useEffect)((function(){"client"===r&&!1!==i||(window.location="/")}),[]);var s=Object(c.useState)(t.getAllExpertise()),a=Object(h.a)(s,2),o=a[0],l=a[1];Object(c.useEffect)((function(){return l(t.getAllExpertise())}),[]);var d=Object(c.useState)(t.getExpertise()),u=Object(h.a)(d,2),j=u[0],b=u[1];Object(c.useEffect)((function(){return t.addObserver((function(){b(t.getExpertise())}))}),[t]),Object(c.useEffect)((function(){return localStorage.setItem("formData",j)}));var p=n.apiAxios();return Object(f.jsx)("div",{children:"client"===r&&!0===i?Object(f.jsxs)("div",{children:[Object(f.jsx)(v,{myExpertise:j,removeExpertise:function(e){t.removeExpertise(e),l([].concat(Object(O.a)(o),[e]))}}),Object(f.jsx)(g,{expertise:o,addExpertise:function(e,n){return t.addExpertise(e,n)},done:function(e){return p.post("posts",{startPeriod:e.start,endPeriod:e.end,dateOfBirth:e.dateOfBirth,status:"unhandled",firstName:e.fname,lastName:e.lname,competence:j})},removeOption:function(e){return function(e){var t=o.filter((function(t){return t!==e}));l(t)}(e)}})]}):""})}var v=function(e){var t=e.myExpertise,n=e.removeExpertise;return Object(f.jsx)("div",{children:t.map((function(e){return Object(f.jsxs)("tbody",{children:[Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.name}),Object(f.jsx)("td",{children:e.year})]},e.name+e.year),Object(f.jsx)("button",{onClick:function(){return n(e.name)},children:"remove"})]})}))})},g=function(e){var t=e.expertise,n=e.addExpertise,i=e.done,r=e.removeOption,s=Object(m.c)((function(e){return e.UserReducer.userInfo}));console.log(s);var a=Object(c.useState)(0),o=Object(h.a)(a,2),l=o[0],d=o[1],u=Object(c.useState)(""),j=Object(h.a)(u,2),b=j[0],O=j[1],p=Object(c.useState)(""),x=Object(h.a)(p,2),v=x[0],g=x[1],y=Object(c.useState)(""),k=Object(h.a)(y,2),S=k[0],E=k[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"number",min:"0",placeholder:"years of experience",onChange:function(e){return d(e.target.value)}}),Object(f.jsxs)("select",{onChange:function(e){return O(e.target.value)},children:[Object(f.jsx)("option",{children:"choose your expertise"}),t.map((function(e){return Object(f.jsx)("option",{children:e},e)}))]}),Object(f.jsx)("button",{onClick:function(){n(b,l),r(b)},children:"add skill to application"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"text",min:"0",placeholder:"available start period",onChange:function(e){g(e.target.value)}}),Object(f.jsx)("input",{type:"text",min:"0",placeholder:"available end period",onChange:function(e){E(e.target.value)}}),Object(f.jsx)("button",{onClick:function(){!0===window.confirm("Are you sure you want to submit your application?")&&i({start:v,end:S,fname:s[0].fname,lname:s[0].lname,status:"unhandled",dateOfBirth:s[0].dateOfBirth})},children:"confirm and send application"})]})]})},y=n(53),k=n(78),S=n(26),E=n(310),w=n(309),C=n(25),N={userInfo:[{isLoggedIn:!1,role:null,fname:"",lname:"",dateOfBirth:""}]},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN_USER":return{userInfo:[{isLoggedIn:!0,role:t.role,fname:t.fname,lname:t.lname,dateOfBirth:t.dateOfBirth}]};case"LOG_OUT_USER":return{userInfo:[{isLoggedIn:!1,role:null,fname:"",lname:"",dateOfBirth:""}]};case"SIGN_UP_USER":return{userInfo:[{isLoggedIn:!0,role:t.role,fname:t.fname,lname:t.lname,dateOfBirth:t.dateOfBirth}]};default:return e}},L=function(e){var t=e.apiCall,n=Object(c.useState)("Sign up"),i=Object(h.a)(n,2),r=i[0],s=i[1],a=Object(c.useState)("Login"),o=Object(h.a)(a,2),l=o[0],d=o[1],u=Object(m.c)((function(e){return e.UserReducer.userInfo[0].isLoggedIn})),j=Object(m.c)((function(e){return e.UserReducer.userInfo[0].role})),b=Object(m.b)();Object(c.useEffect)((function(){"client"===j?window.location="/user/application":"admin"===j&&(window.location="/admin/applications")}),[u]);var O=function(e){var t=e.placeholder,n=Object(k.a)(e,["placeholder"]),c=Object(S.d)(n),i=Object(h.a)(c,2),r=i[0],s=i[1],a=s.error&&s.touched?s.error:"";return Object(f.jsx)(E.a,Object(y.a)(Object(y.a)({placeholder:t},r),{},{helperText:a,error:!!a,type:n.type}))},p=C.c().shape({email:C.d().min(4,"Too Short!").required("Required").email("Invalid email"),password:C.d().min(4,"Too Short!").required("Required"),firstName:"Login"===r?C.d():C.d().required("Required"),lastName:"Login"===r?C.d():C.d().required("Required"),dateOfBirth:C.a().of(C.c().shape({year:"Login"===r?C.b():C.b().required("Required"),month:"Login"===r?C.b():C.b().min(1,"must be between 1 and 12").max(12,"must be between 1 and 31").required("Required"),day:"Login"===r?C.b():C.b().min(1,"must be between 1 and 31").max(31,"must be between 1 and 31").required("Required")}))});return Object(f.jsx)("div",{children:u?"":Object(f.jsxs)("div",{children:[Object(f.jsx)(S.c,{initialValues:{username:"",email:"",password:"",firstName:"",lastName:"",dateOfBirth:[{year:"",month:"",day:""}]},onSubmit:function(e,n){var c=n.setSubmitting,i=n.resetForm;c(!0),i();if("Sign up"===r){var s=t.apiAxios();console.log(e),s.post("auth/register",{data:e}).then((function(n){console.log(n.headers["set-cookie"]),console.log(n),console.log(document.cookie),t.apiAxios().post("auth/login",{email:e.email,password:e.password}).then((function(t){var n;console.log(t),b((n=e,console.log(n),function(e,t){e({type:"SIGN_UP_USER",role:"client",fname:n.firstName,lname:n.lastName,dateOfBirth:n.dateOfBirth})}))}),(function(e){console.log(e)}))}),(function(e){console.log(e)}))}else{var a=t.apiAxios();console.log(e),a.get("posts").then((function(e){return console.log(e)}))}console.log("submit:",{data:e}),c(!1)},validationSchema:p,children:function(e){var t=e.values,n=e.isSubmitting,c=e.resetForm,i=e.errors;return Object(f.jsxs)(S.b,{children:[Object(f.jsx)("div",{children:Object(f.jsx)(O,{placeholder:"Email",name:"email",type:"input"})}),Object(f.jsx)("div",{children:Object(f.jsx)(O,{placeholder:"Password",name:"password",type:"password"})}),"Sign up"===r?Object(f.jsx)("div",{children:Object(f.jsx)(O,{placeholder:"Username",name:"username",type:"input"})}):"","Sign up"===r?Object(f.jsx)("div",{children:Object(f.jsx)(O,{placeholder:"First Name",name:"firstName",type:"input"})}):"","Sign up"===r?Object(f.jsx)("div",{children:Object(f.jsx)(O,{placeholder:"Last Name",name:"lastName",type:"input"})}):"","Sign up"===r?Object(f.jsxs)("div",{children:[Object(f.jsx)(O,{placeholder:"Year",name:"dateOfBirth[0].year",type:"number"}),Object(f.jsx)(O,{placeholder:"Month",name:"dateOfBirth[0].month",type:"number"}),Object(f.jsx)(O,{placeholder:"Day",name:"dateOfBirth[0].day",type:"number"})]}):"",Object(f.jsx)("div",{children:Object(f.jsx)(w.a,{disabled:n,type:"submit",children:r})}),Object(f.jsx)("pre",{children:JSON.stringify(t,null,2)}),Object(f.jsx)("pre",{children:JSON.stringify(i,null,2)}),Object(f.jsx)("div",{onClick:function(){"Login"===r?(s("Sign up"),d("Login")):(s("Login"),d("Sign up")),c()},children:l})]})}}),Object(f.jsx)("div",{onClick:function(){var e;e="/admin/signup",window.location=e},children:"sign up new admin"})]})})},B=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(S.c,{initialValues:{email:"",password:"",adminKey:""},onSubmit:function(e,t){var n=t.setSubmitting,c=t.resetForm;n(!0),c(),console.log("submit:",e),n(!1)},children:function(e){var t=e.values,n=e.isSubmitting;return Object(f.jsxs)(S.b,{children:[Object(f.jsx)(S.a,{placeholder:"Email",name:"email",type:"input",as:E.a}),Object(f.jsx)("div",{children:Object(f.jsx)(S.a,{placeholder:"Password",name:"password",type:"password",as:E.a})}),Object(f.jsx)("div",{children:Object(f.jsx)(S.a,{placeholder:"Key",name:"adminKey",type:"password",as:E.a})}),Object(f.jsx)("div",{children:Object(f.jsx)(w.a,{disabled:n,type:"submit",children:"Sign up"})}),Object(f.jsx)("pre",{children:JSON.stringify(t,null,2)})]})}}),Object(f.jsx)("div",{onClick:function(){var e;e="/",window.location=e},children:"log in"})]})},R=n(312),U=n(311),A=function(e){var t,n,c=e.item;return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:c.firstName}),Object(f.jsx)("td",{children:c.lastName}),Object(f.jsx)("td",{children:null===(t=c.competence)||void 0===t?void 0:t.map((function(e){return Object(f.jsxs)("div",{children:[e.name," ",e.year," year(s)"]})}))}),Object(f.jsx)("td",{children:c.startPeriod}),Object(f.jsx)("td",{children:c.endPeriod}),Object(f.jsx)("td",{children:null===(n=c.dateOfBirth)||void 0===n?void 0:n.map((function(e){return Object(f.jsxs)("div",{children:[e.year,"-",e.month,"-",e.day," "]})}))}),Object(f.jsx)("td",{children:c.date}),Object(f.jsx)("td",{children:Object(f.jsxs)("select",{name:"status",onChange:function(e){!function(e){console.log(e.target.value)}(e)},children:[Object(f.jsx)("option",{selected:"selected",value:"unhandled",children:"unhandled"}),Object(f.jsx)("option",{value:"rejected",children:"rejected"}),Object(f.jsx)("option",{value:"accepted",children:"accepted"})]})})]},c.id)},q=(n(273),function(e){var t=e.applications;return console.log(t),Object(f.jsxs)("table",{className:"content-table",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"fname"}),Object(f.jsx)("th",{children:"lname"}),Object(f.jsx)("th",{children:"skills"}),Object(f.jsx)("th",{children:"startP"}),Object(f.jsx)("th",{children:"endP"}),Object(f.jsx)("th",{children:"date of birth"}),Object(f.jsx)("th",{children:"application made at"}),Object(f.jsx)("th",{children:"application status"})]})}),Object(f.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return Object(f.jsx)(A,{item:e})}))})]})}),P=function(e){var t=e.apiCall,n=Object(c.useState)([]),i=Object(h.a)(n,2),r=i[0],s=i[1],a=Object(m.c)((function(e){return e.UserReducer.userInfo[0].isLoggedIn})),o=Object(m.c)((function(e){return e.UserReducer.userInfo[0].role}));Object(c.useEffect)((function(){"admin"===o&&!1!==a||(window.location="/")}),[a,o]);var l=function(e){var t=e.label,n=Object(k.a)(e,["label"]),c=Object(S.d)(n),i=Object(h.a)(c,1)[0];return Object(f.jsx)(R.a,Object(y.a)(Object(y.a)({},i),{},{control:Object(f.jsx)(U.a,{}),label:t}))};return Object(f.jsx)("div",{children:"admin"===o&&!0===a?Object(f.jsxs)("div",{children:[Object(f.jsx)(S.c,{initialValues:{competences:[]},onSubmit:function(e,n){var c=n.setSubmitting;c(!0);var i="posts";console.log(e.competences.length),console.log(e.competences[0]),console.log(e.competences[1]),2===e.competences.length?i="posts/competence/or="+e.competences[0]+"&="+e.competences[1]:1===e.competences.length&&(i="posts/competence="+e.competences[0]),console.log(i),t.apiAxios().get(i).then((function(e){return c(!1),s(e.data),s(e.data)}))},children:function(e){var t=e.values,n=e.isSubmitting,c=e.errors;return Object(f.jsxs)(S.b,{children:[Object(f.jsx)(l,{name:"competences",value:"A-skills",type:"checkbox",label:"A-skills"}),Object(f.jsx)(l,{name:"competences",value:"B-skills",type:"checkbox",label:"B-skills"}),Object(f.jsx)(l,{name:"competences",value:"C-skills",type:"checkbox",label:"C-skills"}),Object(f.jsx)(l,{name:"competences",value:"D-skills",type:"checkbox",label:"D-skills"}),Object(f.jsx)(l,{name:"competences",value:"E-skills",type:"checkbox",label:"E-skills"}),Object(f.jsx)(w.a,{disabled:n,type:"submit",children:"Get Applications"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("pre",{children:JSON.stringify(t,null,2)}),Object(f.jsx)("pre",{children:JSON.stringify(c,null,2)})]})]})}}),r.length>0?Object(f.jsx)(q,{applications:r}):""]}):""})},_=(n(274),function(){var e=Object(m.c)((function(e){return e.UserReducer.userInfo[0].isLoggedIn})),t=Object(m.b)();return Object(f.jsxs)("div",{className:"Header-wrapper",children:[Object(f.jsx)("div",{className:"logo",children:"Recruitment Logo Here"}),e?Object(f.jsx)("button",{className:"authButton",onClick:function(){return t((function(e,t){e({type:"LOG_OUT_USER"})}))},children:"Log out"}):""]})}),F=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).state={apiCall:new b,model:new p},c}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"applicationApp",children:[Object(f.jsx)("header",{className:"recruitmentApp",children:Object(f.jsx)(_,{})}),Object(f.jsx)(d.a,{exact:!0,path:"/",render:function(){return Object(f.jsx)(L,{apiCall:e.state.apiCall})}}),Object(f.jsx)(d.a,{exact:!0,path:"/admin/signup",render:function(){return Object(f.jsx)(B,{})}}),Object(f.jsx)(d.a,{exact:!0,path:"/user/application",render:function(){return Object(f.jsx)(x,{model:e.state.model,apiCall:e.state.apiCall})}}),Object(f.jsx)(d.a,{exact:!0,path:"/admin/applications",render:function(){return Object(f.jsx)(P,{apiCall:e.state.apiCall})}})]})}}]),n}(c.Component),T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,314)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),r(e),s(e)}))},J=n(31),D=n(137),G=n(93),K=n(138),V=n.n(K),H=Object(J.c)({UserReducer:I}),M={key:"root",storage:V.a},Y=Object(G.a)(M,H),z=Object(J.d)(Y,Object(J.a)(D.a)),Q=Object(G.b)(z),W=n(88),X=n(139);r.a.render(Object(f.jsx)(m.a,{store:z,children:Object(f.jsx)(X.a,{loading:null,persistor:Q,children:Object(f.jsx)(W.a,{children:Object(f.jsx)(F,{})})})}),document.getElementById("root")),T()}},[[278,1,2]]]);
//# sourceMappingURL=main.cda5274b.chunk.js.map